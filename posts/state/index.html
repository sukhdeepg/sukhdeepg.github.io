<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>State with examples in Python | 💾</title>
<meta name="keywords" content="design-patterns">
<meta name="description" content="This one can be bit tricky to understand first, but please read through the complete post, you&rsquo;ll get it.
The State design pattern is a method used in programming to allow an object to behave differently depending on its internal condition (refers to the current situation or status of an object, determined by its properties or attributes.) or &ldquo;state&rdquo;. This pattern involves creating different &ldquo;state&rdquo; objects for each possible condition, and a main object, called the &ldquo;context&rdquo;, which changes its behavior based on whichever state object is currently active.">
<meta name="author" content="">
<link rel="canonical" href="https://sukhdeepg.github.io/posts/state/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.4011e96cb50c0badbd5e58bc6d1415a2f58babd783714a3a042388142298609f.css" integrity="sha256-QBHpbLUMC629Xli8bRQVovWLq9eDcUo6BCOIFCKYYJ8=" rel="preload stylesheet" as="style">
<link rel="icon" href="https://sukhdeepg.github.io/img/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://sukhdeepg.github.io/img/favicon_16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://sukhdeepg.github.io/img/favicon_32.png">
<link rel="apple-touch-icon" href="https://sukhdeepg.github.io/apple-touch-icon.png">
<link rel="mask-icon" href="https://sukhdeepg.github.io/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --hljs-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><meta property="og:title" content="State with examples in Python" />
<meta property="og:description" content="This one can be bit tricky to understand first, but please read through the complete post, you&rsquo;ll get it.
The State design pattern is a method used in programming to allow an object to behave differently depending on its internal condition (refers to the current situation or status of an object, determined by its properties or attributes.) or &ldquo;state&rdquo;. This pattern involves creating different &ldquo;state&rdquo; objects for each possible condition, and a main object, called the &ldquo;context&rdquo;, which changes its behavior based on whichever state object is currently active." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://sukhdeepg.github.io/posts/state/" />
<meta property="og:image" content="https://sukhdeepg.github.io/img/state.png" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-02-25T20:24:32+05:30" />
<meta property="article:modified_time" content="2024-02-25T20:24:32+05:30" />

<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="https://sukhdeepg.github.io/img/state.png" />
<meta name="twitter:title" content="State with examples in Python"/>
<meta name="twitter:description" content="This one can be bit tricky to understand first, but please read through the complete post, you&rsquo;ll get it.
The State design pattern is a method used in programming to allow an object to behave differently depending on its internal condition (refers to the current situation or status of an object, determined by its properties or attributes.) or &ldquo;state&rdquo;. This pattern involves creating different &ldquo;state&rdquo; objects for each possible condition, and a main object, called the &ldquo;context&rdquo;, which changes its behavior based on whichever state object is currently active."/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "https://sukhdeepg.github.io/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "State with examples in Python",
      "item": "https://sukhdeepg.github.io/posts/state/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "State with examples in Python",
  "name": "State with examples in Python",
  "description": "This one can be bit tricky to understand first, but please read through the complete post, you\u0026rsquo;ll get it.\nThe State design pattern is a method used in programming to allow an object to behave differently depending on its internal condition (refers to the current situation or status of an object, determined by its properties or attributes.) or \u0026ldquo;state\u0026rdquo;. This pattern involves creating different \u0026ldquo;state\u0026rdquo; objects for each possible condition, and a main object, called the \u0026ldquo;context\u0026rdquo;, which changes its behavior based on whichever state object is currently active.",
  "keywords": [
    "design-patterns"
  ],
  "articleBody": "This one can be bit tricky to understand first, but please read through the complete post, you’ll get it.\nThe State design pattern is a method used in programming to allow an object to behave differently depending on its internal condition (refers to the current situation or status of an object, determined by its properties or attributes.) or “state”. This pattern involves creating different “state” objects for each possible condition, and a main object, called the “context”, which changes its behavior based on whichever state object is currently active. Instead of the context object needing to keep track of its state using conditions or flags, it simply delegates behavior to its current state object. This makes the code cleaner and easier to understand, as each state can be managed independently, and the main object doesn’t need complex logic to handle its different behaviors.\nThink of a vending machine that operates differently based on its current state: if the machine is in a “ready” state, it waits for customer input; if it’s in a “selection made” state, it asks for money; and if it’s in a “dispensing” state, it provides the product and returns to the “ready” state. The vending machine behaves differently depending on its internal state, but the way we interact with it remains consistent.\nLet’s understand further with Python example:\nHere, the Car class that can be in different states like Parked, Driving, or Stopped. Depending on the state, the drive and stop methods of the Car class behave differently. Each state is represented by a separate class that implements the same interface, and the Car class changes its behavior by switching between these state instances.\nclass State: def handle_drive(self): pass def handle_stop(self): pass class ParkedState(State): def handle_drive(self): print(\"Switching to Driving state\") return DrivingState() def handle_stop(self): print(\"Already parked\") return self class DrivingState(State): def handle_drive(self): print(\"Already driving\") return self def handle_stop(self): print(\"Switching to Parked state\") return ParkedState() class Car: def __init__(self): self.state = ParkedState() def drive(self): self.state = self.state.handle_drive() def stop(self): self.state = self.state.handle_stop() car = Car() car.drive() car.stop() Output:\nSwitching to Driving state Switching to Parked state In backend engineering, a common real-world example of the State design pattern is in the management of a user’s session on a website. A user session can have various states such as “Logged Out”, “Logged In”, “Idle”, or “Expired”. The session object (context) behaves differently depending on its current state: when “Logged Out”, it might only allow access to public pages; when “Logged In”, it grants access to protected resources; when “Idle”, it might send reminders or prompts to the user; and when “Expired”, it requires the user to log in again.\nEach of these states is represented by a separate state object that knows how to handle requests in that specific state. The session context delegates requests to its current state object, which handles the request based on the rules for that state. This modularizes the code and makes it clearer and easier to manage, as each state’s behavior is encapsulated in its own class.\n",
  "wordCount" : "505",
  "inLanguage": "en",
  "image":"https://sukhdeepg.github.io/img/state.png","datePublished": "2024-02-25T20:24:32+05:30",
  "dateModified": "2024-02-25T20:24:32+05:30",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://sukhdeepg.github.io/posts/state/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "💾",
    "logo": {
      "@type": "ImageObject",
      "url": "https://sukhdeepg.github.io/img/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://sukhdeepg.github.io/" accesskey="h" title="💾 (Alt + H)">💾</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://sukhdeepg.github.io/search/" title="Search (Alt &#43; /)" accesskey=/>
                    <span>Search</span>
                </a>
            </li>
            <li>
                <a href="https://sukhdeepg.github.io/tags/" title="Tags">
                    <span>Tags</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="https://sukhdeepg.github.io/">Home</a>&nbsp;»&nbsp;<a href="https://sukhdeepg.github.io/posts/">Posts</a></div>
    <h1 class="post-title">
      State with examples in Python
    </h1>
    <div class="post-meta"><span title='2024-02-25 20:24:32 +0530 IST'>February 25, 2024</span>&nbsp;·&nbsp;3 min

</div>
  </header> 
<figure class="entry-cover"><img loading="lazy" src="https://sukhdeepg.github.io/img/state.png" alt="state">
        
</figure>
  <div class="post-content"><p>This one can be bit tricky to understand first, but please read through the complete post, you&rsquo;ll get it.</p>
<p>The State design pattern is a method used in programming to allow an object to behave differently depending on its internal condition (refers to the current situation or status of an object, determined by its properties or attributes.) or &ldquo;state&rdquo;. This pattern involves creating different &ldquo;state&rdquo; objects for each possible condition, and a main object, called the &ldquo;context&rdquo;, which changes its behavior based on whichever state object is currently active. Instead of the context object needing to keep track of its state using conditions or flags, it simply delegates behavior to its current state object. This makes the code cleaner and easier to understand, as each state can be managed independently, and the main object doesn&rsquo;t need complex logic to handle its different behaviors.</p>
<p>Think of a vending machine that operates differently based on its current state: if the machine is in a &ldquo;ready&rdquo; state, it waits for customer input; if it&rsquo;s in a &ldquo;selection made&rdquo; state, it asks for money; and if it&rsquo;s in a &ldquo;dispensing&rdquo; state, it provides the product and returns to the &ldquo;ready&rdquo; state. The vending machine behaves differently depending on its internal state, but the way we interact with it remains consistent.</p>
<p>Let&rsquo;s understand further with Python example:</p>
<p>Here, the <code>Car</code> class that can be in different states like <code>Parked</code>, <code>Driving</code>, or <code>Stopped</code>. Depending on the state, the <code>drive</code> and <code>stop</code> methods of the <code>Car</code> class behave differently. Each state is represented by a separate class that implements the same interface, and the Car class changes its behavior by switching between these state instances.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">State</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="nf">handle_drive</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="k">pass</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="nf">handle_stop</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="k">pass</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">ParkedState</span><span class="p">(</span><span class="n">State</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="nf">handle_drive</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="nb">print</span><span class="p">(</span><span class="s2">&#34;Switching to Driving state&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">DrivingState</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="nf">handle_stop</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="nb">print</span><span class="p">(</span><span class="s2">&#34;Already parked&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="bp">self</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">DrivingState</span><span class="p">(</span><span class="n">State</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="nf">handle_drive</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="nb">print</span><span class="p">(</span><span class="s2">&#34;Already driving&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="bp">self</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="nf">handle_stop</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="nb">print</span><span class="p">(</span><span class="s2">&#34;Switching to Parked state&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">ParkedState</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Car</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="bp">self</span><span class="o">.</span><span class="n">state</span> <span class="o">=</span> <span class="n">ParkedState</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="nf">drive</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="bp">self</span><span class="o">.</span><span class="n">state</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">handle_drive</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="nf">stop</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="bp">self</span><span class="o">.</span><span class="n">state</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">state</span><span class="o">.</span><span class="n">handle_stop</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">car</span> <span class="o">=</span> <span class="n">Car</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="n">car</span><span class="o">.</span><span class="n">drive</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="n">car</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>
</span></span></code></pre></div><p>Output:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">Switching to Driving state
</span></span><span class="line"><span class="cl">Switching to Parked state
</span></span></code></pre></div><p>In backend engineering, a common real-world example of the State design pattern is in the management of a user&rsquo;s session on a website. A user session can have various states such as &ldquo;Logged Out&rdquo;, &ldquo;Logged In&rdquo;, &ldquo;Idle&rdquo;, or &ldquo;Expired&rdquo;. The session object (context) behaves differently depending on its current state: when &ldquo;Logged Out&rdquo;, it might only allow access to public pages; when &ldquo;Logged In&rdquo;, it grants access to protected resources; when &ldquo;Idle&rdquo;, it might send reminders or prompts to the user; and when &ldquo;Expired&rdquo;, it requires the user to log in again.</p>
<p>Each of these states is represented by a separate state object that knows how to handle requests in that specific state. The session context delegates requests to its current state object, which handles the request based on the rules for that state. This modularizes the code and makes it clearer and easier to manage, as each state&rsquo;s behavior is encapsulated in its own class.</p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://sukhdeepg.github.io/tags/design-patterns/">design-patterns</a></li>
    </ul>
<nav class="paginav">
  <a class="prev" href="https://sukhdeepg.github.io/posts/strategy/">
    <span class="title">« Prev</span>
    <br>
    <span>Strategy with examples in Python</span>
  </a>
  <a class="next" href="https://sukhdeepg.github.io/posts/observer/">
    <span class="title">Next »</span>
    <br>
    <span>Observer with examples in Python</span>
  </a>
</nav>

  </footer>
</article>
    </main>
    
<footer class="footer">
    <span>&copy; 2024 <a href="https://sukhdeepg.github.io/">💾</a></span>
    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
